var HomeController=function(n,t){var i=function(){t.getMenuList(function(){})};i()},LoginController,ProfileController,ChangePasswordController;HomeController.$inject=["$scope","SystemFactory"];LoginController=function(n,t,i,r,u,f,e,o){var s;n.model={};var h=function(){n.model.isLoggingOut=!0;e.logOut(function(i){i?(t.global.account=null,f.deleteFile(LOCAL_FILE_ACCOUNT_FOLDER+"/"+LOCAL_FILE_ACCOUNT_DATA,function(){})):window.location.reload();n.model.isLoggingOut=!1})},c=function(){n.model.isLoadingPGGroupList=!0;e.getPGGroupList(function(t){t&&(n.model.PGGroupList=t,_.remove(n.model.PGGroupList,function(n){return n.GroupID==14}));n.model.isLoadingPGGroupList=!1})},l=function(){return S(n.model.phone).isEmpty()?(o.alert("Vui lòng nhập số điện thoại",function(){n.model.focusPhone=!0}),!1):S(n.model.password).isEmpty()?(o.alert("Vui lòng nhập mật khẩu",function(){n.model.focusPassword=!0}),!1):!0};n.login=function(){var f=l(),t;f&&(t=CryptoJS.MD5(n.model.password).toString(),n.model.isLoading=!0,e.logIn(n.model.phone,t,function(t){t?t.ErrorMessage?n.model.errorMessage=t.ErrorMessage:(u.loginSuccess(t),r.canDragContent(!0),i.go("app.home")):n.model.errorMessage="Lỗi kết nối";n.model.isLoading=!1}))};s=function(){r.canDragContent(!1);h();c()};s()};LoginController.$inject=["$scope","$rootScope","$state","$ionicSideMenuDelegate","SystemFactory","LocalFileFactory","LoginFactory","PopupFactory"];ProfileController=function(n,t,i,r,u){n.model={};n.model.showRotate=!0;n.changeAvatar=function(){n.model.isRotating||u.takePhoto(function(u){S(u).isEmpty()||(n.model.isChangingAvatar=!0,r.changeAvatar(u,function(r){r&&(t.global.account.ImagePath=r);i(function(){n.model.isChangingAvatar=!1})}))},3)};n.rotate=function(i){n.model.isRotating||(n.model.isRotating=!0,r.rotate(i,function(i){i&&(t.global.account.ImagePath=i);n.model.isRotating=!1}))};var f=function(){};f()};ProfileController.$inject=["$scope","$rootScope","$timeout","ProfileFactory","CameraFactory"];ChangePasswordController=function(n,t,i,r,u,f){var e,o,s;n.model={};e=function(){n.model.focusNewPassword=!0};o=function(){n.model.focusRetypedNewPassword=!0};n.changePassword=function(){if(S(n.model.oldPassword).isEmpty())u.alert("Vui lòng nhập mật khẩu cũ",function(){n.model.focusOldPassword=!0});else if(S(n.model.newPassword).isEmpty())u.alert("Vui lòng nhập mật khẩu mới",e);else if(n.model.oldPassword==n.model.retypedNewPassword)u.alert("Mật khẩu cũ và mật khẩu mới không được giống nhau",e);else if(S(n.model.retypedNewPassword).isEmpty())u.alert("Vui lòng nhập lại mật khẩu mới",o);else if(n.model.newPassword!=n.model.retypedNewPassword)u.alert("Mật khẩu mới nhập lần đầu và nhập lại không giống nhau",o);else{n.model.isChangingPassword=!0;var h=CryptoJS.MD5(n.model.oldPassword).toString(),s=CryptoJS.MD5(n.model.newPassword).toString();r.setNewPassword(h,s,function(r){r&&(i.go("app.profile"),t.global.account.Password=s,f.saveUserData(function(){}));n.model.isChangingPassword=!1})}};s=function(){};s()};ChangePasswordController.$inject=["$scope","$rootScope","$state","ProfileFactory","PopupFactory","SystemFactory"];